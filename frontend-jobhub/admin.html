<script>
    function loginUser() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
  
      const loginData = {
        username,
        password,
      };
        fetch('http://localhost:2001/auth/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(loginData),
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Invalid credentials');
          }
          return response.json();
        })
        .then(data => {
          console.log('Response data:', data);
  
          if (!data.userId || typeof data.userId !== 'string') {
            throw new Error('User ID not found or invalid in the response');
          }
  
          // Store token and userId in localStorage
          localStorage.setItem('userToken', data.token);
          localStorage.setItem('userId', data.userId);
  
          // Log stored values
          console.log('Stored userToken:', localStorage.getItem('userToken'));
          console.log('Stored userId:', localStorage.getItem('userId'));
  
          // Redirect based on user role
          if (data.role === 'admin') {
            // Redirect admin to admin page
            window.location.href = 'admin-dashboard.html';
          } else {
            // Redirect user to user dashboard
            window.location.href = 'dashboard.html';
          }
        })
        .catch(error => {
          console.error('Login failed:', error.message);
          document.getElementById('errorMessage').innerHTML = <p class="error-message">${error.message}</p>;
        });
    }
  </script>
  